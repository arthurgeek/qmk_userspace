// Copyright 2024 splitkb.com (support@splitkb.com)
// SPDX-License-Identifier: GPL-2.0-or-later

#include QMK_KEYBOARD_H
#include "portuguese.h"
#include "keymap_blocks.h"
#include "layers.h"  // Kyria-specific layers (includes generic layers)

// Kyria-specific layout wrapper (3x6 matrix + 5 thumbs + extras)
#define LAYOUT_wrapper(...) LAYOUT_split_3x6_5_hlc(__VA_ARGS__)

// Kyria-specific aliases
#define RGB   MO(_RGB)

// Kyria-specific RGB layer blocks (RGB controls)
#define ____________________RGB_L1_____________________ _______, _______, _______, _______, _______
#define ____________________RGB_L2_____________________ _______, _______, _______, _______, _______
#define ____________________RGB_L3_____________________ _______, _______, _______, _______, _______
#define ____________________RGB_R1_____________________ _______, _______, _______, _______, _______
#define ____________________RGB_R2_____________________ RM_TOGG, RM_SATU, RM_HUEU, RM_VALU, RM_NEXT
#define ____________________RGB_R3_____________________ _______, RM_SATD, RM_HUED, RM_VALD, RM_PREV

// clang-format off
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
/*
 * Base Layer: Alpha with Home Row Mods (CAGS)
 */
    [_ALPHA] = LAYOUT_wrapper(
     _______ , ____________________ALPHA_L1___________________ ,                                             ____________________ALPHA_R1___________________ , _______,
     OSL(_PT), ____________________ALPHA_L2___________________ ,                                             ____________________ALPHA_R2___________________ , _______,
     _______ , ____________________ALPHA_L3___________________ , KC_LBRC, KC_CAPS, _______, KC_RBRC,         ____________________ALPHA_R3___________________ , KC_SLSH,
                                           RGB , ________________ALPHA_THUMBS_L_________________, KC_NO  , ________________ALPHA_THUMBS_R_________________, _______, KC_APP,
                                           KC_NO  , KC_NO  , KC_NO  , KC_NO  , KC_NO  , KC_NO  , KC_NO  , KC_NO  , KC_NO  , KC_NO
    ),

/*
 * Nav Layer: Miryoku navigation and editing
 */
    [_NAV] = LAYOUT_wrapper(
     _______, ___________________NAV_L1______________________ ,                                     ___________________NAV_R1______________________ , _______,
     _______, ___________________NAV_L2______________________ ,                                     ___________________NAV_R2______________________ , _______,
     _______, ___________________NAV_L3______________________ , _______, _______, _______, _______, ___________________NAV_R3______________________ , _______,
                                _______, ________________NAV_THUMBS_L___________________, _______,    _______, ________________NAV_THUMBS_R___________________, _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______
    ),

/*
 * Mouse Layer: Miryoku mouse emulation
 */
    [_MOUSE] = LAYOUT_wrapper(
     _______, __________________MOUSE_L1_____________________ ,                                     __________________MOUSE_R1_____________________ , _______,
     _______, __________________MOUSE_L2_____________________ ,                                     __________________MOUSE_R2_____________________ , _______,
     _______, __________________MOUSE_L3_____________________ , _______, _______, _______, _______, __________________MOUSE_R3_____________________ , _______,
                                _______, _______________MOUSE_THUMBS_L__________________, _______,    _______, _______________MOUSE_THUMBS_R__________________, _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______
    ),

/*
 * Media Layer: Media controls and RGB
 */
    [_MEDIA] = LAYOUT_wrapper(
     _______, __________________MEDIA_L1_____________________ ,                                     RM_TOGG, RM_NEXT, RM_HUEU, RM_SATU, RM_VALU, _______,
     _______, __________________MEDIA_L2_____________________ ,                                     __________________MEDIA_R2_____________________ , _______,
     _______, __________________MEDIA_L3_____________________ , _______, _______, _______, _______, __________________MEDIA_R3_____________________ , _______,
                                _______, _______________MEDIA_THUMBS_L__________________, _______,    _______, _______________MEDIA_THUMBS_R__________________, _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______
    ),

/*
 * Num Layer: Numpad on left hand
 */
    [_NUM] = LAYOUT_wrapper(
     _______, ___________________NUM_L1______________________ ,                                     ___________________NUM_R1______________________ , _______,
     _______, ___________________NUM_L2______________________ ,                                      ___________________NUM_R2______________________ , _______,
     _______, ___________________NUM_L3______________________ , _______, _______, _______, _______, ___________________NUM_R3______________________ , _______,
                                _______, ________________NUM_THUMBS_L___________________, _______,    _______, ________________NUM_THUMBS_R___________________, _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______
    ),

/*
 * Sym Layer: Symbols on left hand (shifted versions of Num)
 */
    [_SYM] = LAYOUT_wrapper(
     _______, ___________________SYM_L1______________________ ,                                     ___________________SYM_R1______________________ , _______,
     _______, ___________________SYM_L2______________________ ,                                     ___________________SYM_R2______________________ , _______,
     _______, ___________________SYM_L3______________________ , _______, _______, _______, _______, ___________________SYM_R3______________________ , _______,
                                _______, ________________SYM_THUMBS_L___________________, _______,    _______, ________________SYM_THUMBS_R___________________, _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______
    ),

/*
 * Fun Layer: Function keys (mirrors Num layout)
 */
    [_FUN] = LAYOUT_wrapper(
     _______, ___________________FUN_L1______________________ ,                                     ___________________FUN_R1______________________ , _______,
     _______, ___________________FUN_L2______________________ ,                                     ___________________FUN_R2______________________ , _______,
     _______, ___________________FUN_L3______________________ , _______, _______, _______, _______, ___________________FUN_R3______________________ , _______,
                                _______, ________________FUN_THUMBS_L___________________, _______,    _______, ________________FUN_THUMBS_R___________________, _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______
    ),

/*
 * RGB Layer: RGB controls
 */
   [_RGB] = LAYOUT_wrapper(
    _______, ____________________RGB_L1_____________________ ,                                     ____________________RGB_R1_____________________ , _______,
    _______, ____________________RGB_L2_____________________ ,                                     ____________________RGB_R2_____________________ , _______,
    _______, ____________________RGB_L3_____________________ , _______, _______, _______, _______, ____________________RGB_R3_____________________ , _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______
    ),

/*
 * PT Layer: Portuguese accented characters
 */
    [_PT] = LAYOUT_wrapper(
     _______, ___________________PT_L1_______________________ ,                                         ___________________PT_R1_______________________ , _______,
     _______, ___________________PT_L2_______________________ ,                                         ___________________PT_R2_______________________ , _______,
     _______, ___________________PT_L3_______________________ , _______, _______, _______, _______, ___________________PT_R3_______________________ , _______,
                                _______, _________________PT_THUMBS_L___________________, _______,    _______, _________________PT_THUMBS_R___________________, _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______
    ),

/*
 * PT_COMBO Layer: Portuguese character combinations
 */
    [_PT_COMBO] = LAYOUT_wrapper(
     _______, _________________PT_COMBO_L1___________________ ,                                     _________________PT_COMBO_R1___________________ , _______,
     _______, _________________PT_COMBO_L2___________________ ,                                     _________________PT_COMBO_R2___________________ , _______,
     _______, _________________PT_COMBO_L3___________________ , _______, _______, _______, _______, _________________PT_COMBO_R3___________________ , _______,
                                _______, ______________PT_COMBO_THUMBS_L________________, _______,    _______, ______________PT_COMBO_THUMBS_R________________, _______,
                                _______, _______, _______, _______, _______    ,        _______, _______, _______, _______, _______
    ),

// /*
//  * Layer template
//  *
//  * ,-------------------------------------------.                              ,-------------------------------------------.
//  * |        |      |      |      |      |      |                              |      |      |      |      |      |        |
//  * |--------+------+------+------+------+------|                              |------+------+------+------+------+--------|
//  * |        |      |      |      |      |      |                              |      |      |      |      |      |        |
//  * |--------+------+------+------+------+------+-------------.  ,-------------+------+------+------+------+------+--------|
//  * |        |      |      |      |      |      |      |      | |      |      |      |      |      |      |      |        |
//  * `----------------------+------+------+------+------+------|  |------+------+------+------+------+----------------------'
//  *                        |      |      |      |      |      |  |      |      |      |      |      |
//  *                        `----------------------------------'  `----------------------------------'
//  */
//     [_LAYERINDEX] = LAYOUT_split_3x6_5_hlc(
//      _______, _______, _______, _______, _______, _______,                                     _______, _______, _______, _______, _______, _______,
//      _______, _______, _______, _______, _______, _______,                                     _______, _______, _______, _______, _______, _______,
//      _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
//                                 _______, _______, _______, _______, _______, _______, _______, _______, _______, _______
//     ),
};
// clang-format on

// Predictive Tap Hold side layout
const uint8_t pth_side_layout[MATRIX_ROWS][MATRIX_COLS] PROGMEM = LAYOUT_split_3x6_5_hlc(
 PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_L,                                           PTH_R, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R,
 PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_L,                                           PTH_R, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R,
 PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_L,               PTH_R, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R,
                            PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R,
                            PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R
);
