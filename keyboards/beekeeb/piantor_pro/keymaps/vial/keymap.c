// Copyright 2024 splitkb.com (support@splitkb.com)
// SPDX-License-Identifier: GPL-2.0-or-later

#include QMK_KEYBOARD_H
#include "base_layers.h"
#include "portuguese.h"
#include "keymap_blocks.h"

// Piantor-specific layout wrapper (3x6 matrix + 3 thumbs)
#define LAYOUT_wrapper(...) LAYOUT_split_3x6_3(__VA_ARGS__)

// clang-format off
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
/*
 * Base Layer: Alpha with Home Row Mods (CAGS)
 *
 * ,-------------------------------------------.                              ,-------------------------------------------.
 * |   Tab  |   B  |   L  |   D  |   C  |   V  |                              |   J  |   Y  |   O  |   U  |   ,  |  Bspc  |
 * |--------+------+------+------+------+------|                              |------+------+------+------+------+--------|
 * | OSL(PT)| Ctl/N| Alt/R|GUI/T |Sft/S |   G  |                              |   P  |Sft/H |GUI/A |Alt/E |Ctl/I |  ' "   |
 * |--------+------+------+------+------+------|                              |------+------+------+------+------+--------|
 * |   [    |   X  |   Q  |   M  |   W  |   Z  |                              |   K  |   F  |  ' " | ;  : | .  > |  /  ?  |
 * `--------+------+------+------+------+------+                              +------+------+------+------+------+--------'
 *                        |Med/Esc|Nav/Sp|Mse/Tb|                              |Sym/Bs|Num/En|Fun/Del|
 *                        `----------------------'                              `----------------------'
 */
    [_ALPHA] = LAYOUT_wrapper(
     KC_TAB  , ____________________ALPHA_L1___________________ ,        ____________________ALPHA_R1___________________ , KC_BSPC,
     OSL(_PT), ____________________ALPHA_L2___________________ ,        ____________________ALPHA_R2___________________ , KC_QUOT,
     KC_LBRC , ____________________ALPHA_L3___________________ ,        ____________________ALPHA_R3___________________ , KC_SLSH,
                                           ________________ALPHA_THUMBS_L_________________ ,        ________________ALPHA_THUMBS_R_________________
    ),

/*
 * Nav Layer: Miryoku navigation and editing
 */
    [_NAV] = LAYOUT_wrapper(
     _______, ___________________NAV_L1______________________ ,        ___________________NAV_R1______________________ , _______,
     _______, ___________________NAV_L2______________________ ,        ___________________NAV_R2______________________ , _______,
     _______, ___________________NAV_L3______________________ ,        ___________________NAV_R3______________________ , _______,
                                ________________NAV_THUMBS_L___________________ ,        ________________NAV_THUMBS_R___________________
    ),

/*
 * Mouse Layer: Miryoku mouse emulation
 */
    [_MOUSE] = LAYOUT_wrapper(
     _______, __________________MOUSE_L1_____________________ ,        __________________MOUSE_R1_____________________ , _______,
     _______, __________________MOUSE_L2_____________________ ,        __________________MOUSE_R2_____________________ , _______,
     _______, __________________MOUSE_L3_____________________ ,        __________________MOUSE_R3_____________________ , _______,
                                _______________MOUSE_THUMBS_L__________________ ,        _______________MOUSE_THUMBS_R__________________
    ),

/*
 * Media Layer: Media controls
 */
    [_MEDIA] = LAYOUT_wrapper(
     _______, __________________MEDIA_L1_____________________ ,        __________________MEDIA_R1_____________________ , _______,
     _______, __________________MEDIA_L2_____________________ ,        __________________MEDIA_R2_____________________ , _______,
     _______, __________________MEDIA_L3_____________________ ,        __________________MEDIA_R3_____________________ , _______,
                                _______________MEDIA_THUMBS_L__________________ ,        _______________MEDIA_THUMBS_R__________________
    ),

/*
 * Num Layer: Numpad on left hand
 */
    [_NUM] = LAYOUT_wrapper(
     _______, ___________________NUM_L1______________________ ,        ___________________NUM_R1______________________ , _______,
     _______, ___________________NUM_L2______________________ ,        ___________________NUM_R2______________________ , _______,
     _______, ___________________NUM_L3______________________ ,        ___________________NUM_R3______________________ , _______,
                                ________________NUM_THUMBS_L___________________ ,        ________________NUM_THUMBS_R___________________
    ),

/*
 * Sym Layer: Symbols on left hand (shifted versions of Num)
 */
    [_SYM] = LAYOUT_wrapper(
     _______, ___________________SYM_L1______________________ ,        ___________________SYM_R1______________________ , _______,
     _______, ___________________SYM_L2______________________ ,        ___________________SYM_R2______________________ , _______,
     _______, ___________________SYM_L3______________________ ,        ___________________SYM_R3______________________ , _______,
                                ________________SYM_THUMBS_L___________________ ,        ________________SYM_THUMBS_R___________________
    ),

/*
 * Fun Layer: Function keys (mirrors Num layout)
 */
    [_FUN] = LAYOUT_wrapper(
     _______, ___________________FUN_L1______________________ ,        ___________________FUN_R1______________________ , _______,
     _______, ___________________FUN_L2______________________ ,        ___________________FUN_R2______________________ , _______,
     _______, ___________________FUN_L3______________________ ,        ___________________FUN_R3______________________ , _______,
                                ________________FUN_THUMBS_L___________________ ,        ________________FUN_THUMBS_R___________________
    ),

/*
 * PT Layer: Portuguese accented characters
 */
    [_PT] = LAYOUT_wrapper(
     _______, ___________________PT_L1_______________________ ,        ___________________PT_R1_______________________ , _______,
     _______, ___________________PT_L2_______________________ ,        ___________________PT_R2_______________________ , _______,
     _______, ___________________PT_L3_______________________ ,        ___________________PT_R3_______________________ , _______,
                                _________________PT_THUMBS_L___________________ ,        _________________PT_THUMBS_R___________________
    ),

/*
 * PT_COMBO Layer: Portuguese character combinations
 */
    [_PT_COMBO] = LAYOUT_wrapper(
     _______, _________________PT_COMBO_L1___________________ ,        _________________PT_COMBO_R1___________________ , _______,
     _______, _________________PT_COMBO_L2___________________ ,        _________________PT_COMBO_R2___________________ , _______,
     _______, _________________PT_COMBO_L3___________________ ,        _________________PT_COMBO_R3___________________ , _______,
                                ______________PT_COMBO_THUMBS_L________________ ,        ______________PT_COMBO_THUMBS_R________________
    ),
};
// clang-format on

// Predictive Tap Hold side layout
const uint8_t pth_side_layout[MATRIX_ROWS][MATRIX_COLS] PROGMEM = LAYOUT_split_3x6_3(
 PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_L,        PTH_R, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R,
 PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_L,        PTH_R, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R,
 PTH_L, PTH_L, PTH_L, PTH_L, PTH_L, PTH_L,        PTH_R, PTH_R, PTH_R, PTH_R, PTH_R, PTH_R,
                      PTH_L, PTH_L, PTH_L,        PTH_R, PTH_R, PTH_R
);
